(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(72)},41:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(26),c=a.n(r),l=(a(41),a(27)),i=a(28),s=a(33),u=a(29),m=a(34),d=a(73),p=a(75),f=a(76),E=a(7),h=a(35),g=a(2),b=function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()},y=function(e){var t=e.id,a=e.title,n=e.description,r=e.creationTime,c=e.updateTime,l=e.onEdit,i=e.onDelete,s=e.onSelect,u=e.selected;return o.a.createElement("div",{className:"col-xs-8 col-xs-offset-2 col-sm-3 col-sm-offset-0"},o.a.createElement("div",{className:"note ".concat(u?"note-checked":"")},o.a.createElement("span",{className:"glyphicon glyphicon-".concat(u?"check":"unchecked"),style:{position:"absolute",right:"20px",top:"10px"},"aria-hidden":"true",onClick:function(){return s(t)}}),o.a.createElement("h3",null,a),o.a.createElement("span",null,"Created On: ",b(r)),o.a.createElement("hr",null),o.a.createElement("p",{style:{height:"30px",overflow:"hidden"}},n),o.a.createElement("span",null,"Last updated on: ",b(c)),o.a.createElement("div",{className:"".concat(u?"invisible":""),style:{borderTop:"1px solid #c2c2c2"}},o.a.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true",onClick:function(){return l(t)}},"Edit"),o.a.createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true",onClick:function(){return i(t)}},"Delete"))))},v=a(74),N=a(16),x=a.n(N),O=(a(65),x.a.create({baseURL:"http://localhost:1900"})),k=function(){var e=localStorage.getItem("authToken");if(null===e||void 0===e)throw new Error("Auth token missing");return e},w=function(){var e=k(),t=atob(e.split(".")[1]);return(t=JSON.parse(t)).sub},j=function(e){try{var t=k();return O.delete("/notebook/".concat(e),{headers:{Authorization:t}})}catch(a){return Promise.reject(a)}},T=Object(E.b)(function(e){return{notes:e.notes,username:e.username}},function(e){return{deleteNote:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(t){e({type:"DELETE_NOTE",payload:t})})},updateNote:function(t){e({type:"UPDATE_NOTE",payload:t})},addNote:function(t){e({type:"INITIAL_NOTE",payload:t})}}})(function(e){var t=e.notes,a=e.deleteNote,n=e.updateNote,r=e.username,c=e.addNote,l=o.a.useState(!1),i=Object(g.a)(l,2),s=i[0],u=i[1],m=o.a.useState(!1),d=Object(g.a)(m,2),p=d[0],f=d[1],E=o.a.useState(!1),b=Object(g.a)(E,2),N=b[0],x=b[1],w=o.a.useState(null),T=Object(g.a)(w,2),S=T[0],C=T[1],A=o.a.useState([]),D=Object(g.a)(A,2),R=D[0],L=D[1];o.a.useEffect(function(){(function(e){try{var t=k();return console.log("Api call for ".concat(e)),O.get("/notebook?username=".concat(e),{headers:{Authorization:t}})}catch(a){return Promise.reject(a)}})(r).then(function(e){return c(e.data)})},[]);var F=function(e){var a=t.filter(function(t){return t.id===e});if(a.length>0){var o=a[0].selected,r=R.slice();o?r.splice(r.indexOf(e),1):-1===r.indexOf(e)&&r.push(e),console.log(r),L(r),n(Object(h.a)({},a[0],{selected:!o}))}},I=function(e){if("number"===typeof e)j(e).then(function(){a(e)});else{var t=[],n=R.slice();n.forEach(function(e){t.push(j(e))}),Promise.all(t).then(function(){n.forEach(function(e){return a(e)}),L([])})}},U=function(e){f(!0),C(e)};return N?o.a.createElement(v.a,{to:{pathname:"/",state:{id:S}}}):p?o.a.createElement(v.a,{to:{pathname:"/notes/edit",state:{id:S}}}):s?o.a.createElement(v.a,{to:"/notes/create"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row",style:{height:"100px",padding:"10px 0",boxShadow:"0 0 1px black"}},o.a.createElement("div",{className:"col-xs-6"},o.a.createElement("h1",null,"Welcome ",r)),o.a.createElement("div",{className:"col-xs-6 text-right"},o.a.createElement("button",{type:"button",className:"btn btn-default",style:{marginTop:"20px",backgroundColor:"black",color:"white"},onClick:function(){localStorage.clear(),x(!0)}},"Logout"))),o.a.createElement("div",{className:"row",style:{marginTop:"20px"}},o.a.createElement("div",{className:"col-xs-2"},o.a.createElement("button",{style:{padding:"10px 20px",border:"none",margin:"10px",backgroundColor:"#03739e",borderRadius:"20px",color:"white"},onClick:function(){u(!0)}},"Add Note"),R.length<1?null:o.a.createElement("button",{style:{padding:"10px 20px",border:"none",backgroundColor:"red",borderRadius:"20px",color:"white"},onClick:I},"Delete ",1===R.length?"Note":"Notes")),o.a.createElement("div",{className:"col-xs-10"},o.a.createElement("div",{className:"row"},function(){for(var e=[],a=0,n=0;n<t.length;n++)(n+1)/4===0&&a++,e[a]||(e[a]=[]),e[a].push(t[n]);return e}().map(function(e,t){return o.a.createElement("div",{className:"row",key:t},e.map(function(e,t){return o.a.createElement(y,Object.assign({key:t},e,{onSelect:F,onDelete:I,onEdit:U}))}))}))))))}),S={SideBar:{height:"100vh",backgroundColor:"#424242"},Form:{boxShadow:"0 0 1px black",padding:"30px"},Alert:{padding:"10px 20px",borderRadius:"4px",marginTop:"20px",border:"1px solid #c2c2c2",borderRaduis:"6px",boxShadow:"1px 1px 1.5px #cfcfcf",transition:"opacity 1s"},AlertError:{backgroundColor:"red",color:"white"},Input:{marginTop:"20px"}},C=Object(E.b)(null,function(e){return{setUserNameRedux:function(t){return e({type:"USER_NAME",payload:t})}}})(function(e){var t=e.setUserNameRedux,a=e.location,n=o.a.useState("Login"),r=Object(g.a)(n,2),c=r[0],l=r[1],i=o.a.useState(""),s=Object(g.a)(i,2),u=s[0],m=s[1],d=o.a.useState(""),p=Object(g.a)(d,2),f=p[0],E=p[1],h=o.a.useState(""),b=Object(g.a)(h,2),y=b[0],N=b[1],x=o.a.useState(""),j=Object(g.a)(x,2),T=j[0],C=j[1],A=o.a.useState(!1),D=Object(g.a)(A,2),R=D[0],L=D[1],F=o.a.useState(!1),I=Object(g.a)(F,2),U=(I[0],I[1]),_=o.a.useState({className:"",message:"",opacity:0}),P=function(){_[1]({style:"AlertError",message:"Login Failed",opacity:1}),setTimeout(function(){_[1]({style:"",message:"Login Failed",opacity:0})},2e3)},z=function(){_[1]({style:"AlertError",message:"Register Failed",opacity:1}),setTimeout(function(){_[1]({style:"",message:"Register Failed",opacity:0})},2e3)};o.a.useEffect(function(){U(!1);var e=!1;return e||function(){try{var e=k();return O.get("/users/validate",{headers:{Authorization:e}}).then(function(){return w()})}catch(t){return Promise.reject(t)}}().then(function(a){t(a),e||L(!0)},function(e){console.log(e)}),function(){return e=!0}},[]);if(R){var B="/notes";return a.state&&a.state.from&&(B=a.state.from),o.a.createElement(v.a,{to:B})}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-4 hidden-xs",style:S.SideBar},o.a.createElement("div",{style:{marginTop:"250px",color:"white"}},o.a.createElement("p",{style:{fontSize:"20px"}},"Wander Notes"),o.a.createElement("p",null,"Your personalised notebook manager"))),o.a.createElement("div",{className:"col-sm-8 col-sm-offset-0 col-xs-8 col-xs-offset-2"},o.a.createElement("div",{style:S.Form,className:"col-xs-12 col-xs-offset-0 col-sm-6 col-sm-offset-1 my-form"},o.a.createElement("h3",{className:"text-center hidden-sm hidden-md hidden-lg",style:{padding:"0px",margin:"0",marginBottom:"15px",borderBottom:"3px solid black"}},"Wander Notes"),"Login"===c?null:o.a.createElement("div",{className:"input-group"},o.a.createElement("span",{className:"input-group-addon",id:"basic-addon1"},o.a.createElement("span",{className:"glyphicon glyphicon-user"})),o.a.createElement("input",{type:"text",value:u,onChange:function(e){return m(e.target.value)},className:"form-control",placeholder:"Name","aria-describedby":"basic-addon1"})),o.a.createElement("div",{className:"input-group",style:S.Input},o.a.createElement("span",{className:"input-group-addon",id:"basic-addon1"},o.a.createElement("span",{className:"glyphicon glyphicon-user"})),o.a.createElement("input",{type:"text",value:y,onChange:function(e){return N(e.target.value)},class:"form-control",placeholder:"Username","aria-describedby":"basic-addon1"})),"Login"===c?null:o.a.createElement("div",{class:"input-group",style:S.Input},o.a.createElement("span",{class:"input-group-addon",id:"basic-addon1"},o.a.createElement("span",{className:"glyphicon glyphicon-briefcase"})),o.a.createElement("input",{type:"text",value:f,onChange:function(e){return E(e.target.value)},class:"form-control",placeholder:"Email","aria-describedby":"basic-addon1"})),o.a.createElement("div",{class:"input-group",style:S.Input},o.a.createElement("span",{class:"input-group-addon",id:"basic-addon1"},o.a.createElement("span",{class:"glyphicon glyphicon-lock","aria-hidden":"true"})),o.a.createElement("input",{value:T,onChange:function(e){return C(e.target.value)},type:"password",class:"form-control",placeholder:"Password","aria-describedby":"basic-addon1"})),o.a.createElement("div",{className:"input-group",style:{width:"100%",marginTop:"25px"}},o.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(e){e.preventDefault(),t(y),"Login"===c?function(e,t){return O.post("/login",{username:e,password:t}).then(function(e){var t=e.headers.authorization;return localStorage.setItem("authToken",t),w()})}(y,T).then(function(e){t(e),L(!0)},P):function(e,t,a,n){return O.post("/users/sign-up",{name:e,username:t,email:a,password:n})}(u,y,f,T).then(function(){U(!0),l("Login")},z)}},"Login"===c?"Login":"Register")),o.a.createElement("div",{className:"input-group",style:{width:"100%",marginTop:"15px"}},o.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault(),l("Register"===c?"Login":"Register")}},"Login"!==c?"Login":"Register"))),o.a.createElement("div",{className:"col-xs-12"},o.a.createElement("div",{className:"col-xs-6 col-xs-offset-1 col-sm-4 col-sm-offset-1",style:Object.assign({opacity:_[0].opacity},S.Alert,S.AlertError)},_[0].message))))))}),A=Object(E.b)(function(e){return{notes:e.notes}},function(e){return{updateNote:function(t,a,n){console.log({id:t,title:a,description:n}),e({type:"UPDATE_NOTE",payload:{id:t,title:a,description:n}})}}})(function(e){var t=e.location,a=(e.updateNote,e.notes),n=o.a.useState(!1),r=Object(g.a)(n,2),c=r[0],l=r[1],i=o.a.useState(null),s=Object(g.a)(i,2),u=s[0],m=s[1],d=o.a.useRef(null),p=o.a.useRef(null);o.a.useEffect(function(){if(t.state&&t.state.id){m(t.state.id);var e=a.filter(function(e){return e.id===t.state.id});null!==d.current&&null!==p.current&&(d.current.value=e[0].title,p.current.value=e[0].description)}else l(!0)});var f=function(){return l(!0)};return c?o.a.createElement(v.a,{to:"/notes"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xs-10 col-sm-6 col-sm-offset-3"},o.a.createElement("h3",null,"Edit a Note"),o.a.createElement("hr",null),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"txtTitle"},"Title"),o.a.createElement("input",{type:"text",readOnly:!0,className:"form-control",id:"txtTitle",placeholder:"Enter the title of the note",ref:d})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"txtDescription"},"Description"),o.a.createElement("textarea",{className:"form-control",id:"txtDescription",rows:"3",ref:p})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){(function(e,t){try{var a=k();return O.put("/notebook/".concat(e),{description:t},{headers:{Authorization:a}})}catch(n){return Promise.reject(n)}})(u,p.current.value).then(function(){f()},function(e){console.log(e)})}},"Update"),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:f},"Cancel")))))}),D=Object(E.b)(function(e){return{username:e.username}},function(e){return{addNote:function(t,a){e({type:"ADD_NOTE",payload:{id:4,title:t,description:a}})}}})(function(e){e.addNote;var t=e.username,a=o.a.useState(!1),n=Object(g.a)(a,2),r=n[0],c=n[1],l=o.a.useRef(null),i=o.a.useRef(null);return r?o.a.createElement(v.a,{to:"/notes"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xs-10 col-sm-6 col-sm-offset-3"},o.a.createElement("h3",null,"Create a Note"),o.a.createElement("hr",null),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"txtTitle"},"Title"),o.a.createElement("input",{type:"text",ref:l,className:"form-control",id:"txtTitle",placeholder:"Enter the title of the note"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"txtDescription"},"Description"),o.a.createElement("textarea",{className:"form-control",ref:i,id:"txtDescription",rows:"3"})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){(function(e,t,a){try{var n=k();return O.post("/notebook/user/".concat(e),[{title:t,description:a}],{headers:{Authorization:n}})}catch(o){return Promise.reject(o)}})(t,l.current.value,i.current.value).then(function(){c(!0)},function(e){console.log(e)})}},"Create"),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){l.current.value="",i.current.value="",c(!0)}},"Cancel")))))}),R=Object(E.b)(function(e){return{username:e.username}},function(e){return{setUserNameRedux:function(t){return e({type:"USER_NAME",payload:t})}}})(function(e){var t=e.location,a=e.path,n=e.component,r=e.username,c=e.exact,l=o.a.useState("string"===typeof r&&0===r.trim().length),i=Object(g.a)(l,2),s=i[0];i[1];return s?o.a.createElement(v.a,{to:{pathname:"/",state:{from:t.pathname}}}):(console.log({path:a,component:n}),o.a.createElement(f.a,{exact:c,path:a,component:n}))}),L=(a(71),a(32)),F=a(8),I=a(31),U=Object(F.d)(Object(F.c)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL_NOTE":return t.payload;case"ADD_NOTE":return[].concat(Object(L.a)(e),[t.payload]);case"DELETE_NOTE":return e.filter(function(e){return e.id!==t.payload});case"UPDATE_NOTE":return e.map(function(e){return e.id===t.payload.id?t.payload:e});default:return e}},username:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"USER_NAME"===t.type?t.payload:e}}),Object(F.a)(I.logger)),_=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(E.a,{store:U},o.a.createElement(p.a,null,o.a.createElement(f.a,{exact:!0,path:"/",component:C}),o.a.createElement(R,{exact:!0,path:"/notes",component:T}),o.a.createElement(R,{exact:!0,path:"/notes/edit",component:A}),o.a.createElement(R,{exact:!0,path:"/notes/create",component:D}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);